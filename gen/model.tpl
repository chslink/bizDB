// Code generated by modelgen. DO NOT EDIT.
// 该模型由 {{.TableName}} 表生成
package {{.PackageName}}

import (
	{{- range $pkg, $needed := .Imports}}
	"{{$pkg}}"
	{{- end}}
	
	"github.com/chslink/bizdb"
)

// {{.StructName}} 映射 {{.TableName}} 表结构
// 索引信息：
{{- range .Indexes}}
// - {{.IndexName}} ({{indexType .}}): {{join .ColumnNames ", "}}
{{- end}}
type {{.StructName}} struct {
{{- range .Columns}}
	{{.Name}} {{.Type}} {{.Tag}} {{if .IndexTags}}// Indexes: {{.IndexTags}}{{end}} {{.Comment}}
{{- end}}
}

// TableName 返回表名
func ({{.StructName}}) TableName() string {
	return "{{.TableName}}"
}

// Indexes 返回索引信息
func (m {{.StructName}}) Indexes() []bizdb.Index {
	return []bizdb.Index{
		{{- range .Indexes}}
		{
			Name:   "{{.IndexName}}",
			Fields: []string{ {{- range .ColumnNames}}"{{toCamel .}}", {{end}} },
			Unique: {{.IsUnique}},
			Type:   "{{.IndexType | upper}}",
		},
		{{- end}}
	}
}

// Copy 返回一个深拷贝
func (m {{.StructName}}) Copy() *{{.StructName}} {
	return &{{.StructName}}{
		{{- range .Columns}}
		{{.Name}}: {{if isPointerType .Type}}*{{end}}m.{{.Name}},
		{{- end}}
	}
}